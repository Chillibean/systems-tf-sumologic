---
Global:
  TemplatePath: "../sumologic_observability.master.template.yaml"
  TestProjectName: MasterTemplate
  ParallelTestsRun: 8
  GlobalParameters:
    Section1eSumoLogicResourceRemoveOnDeleteStack: 'true'
    Section2aAccountAlias: 'testenv'
Tests:
  - TestName: defaultparameters
    Regions:
      - ap-south-1
    Skip: false
    Parameters:
      Values:
        Section1aSumoLogicDeployment: 'us1'
        Section1bSumoLogicAccessID: '${ENTERPRISE_US1_ACCESS_ID}'
        Section1cSumoLogicAccessKey: '${ENTERPRISE_US1_ACCESS_KEY}'
        Section1dSumoLogicOrganizationId: '${US1_ENTERPRISE_ORG_ID}'
        Section2aAccountAlias: 'test1env'
        Section4bMetricsNameSpaces: 'AWS/ApiGateway, AWS/DynamoDB, AWS/ElastiCache'
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
            - CreateCommonResources
            - AutoEnableOptions
            - sumoEC2MetricsAppStack
            - sumoAlbMetricsAppStack
            - sumoDynamoDBMetricsAppStack
            - sumoRdsMetricsAppStack
            - sumoApiGatewayMetricsAppStack
            - RootCauseAppStack
            - sumoLambdaMetricsAppStack
            - sumoECSMetricsAppStack
            - sumoElasticCacheMetricsAppStack
            - CreateCommonResources.AddAccountField
            - CreateCommonResources.AddRegionField
            - CreateCommonResources.AddNamespaceField
            - sumoDynamoDBMetricsAppStack.AddTableNameField
            - sumoAlbMetricsAppStack.AddLoadBalancerField
            - sumoLambdaMetricsAppStack.AddFunctionNameField
            - sumoApiGatewayMetricsAppStack.AddApiNameField
            - sumoRdsMetricsAppStack.AddDBIdentifierField
            - sumoEC2MetricsAppStack.AddInstanceIdField
            - sumoECSMetricsAppStack.AddClusterNameField
            - sumoElasticCacheMetricsAppStack.AddCacheClusterIdField
            - CreateCommonResources.LambdaRole
            - CreateCommonResources.LambdaHelper
            - CreateCommonResources.AccountCheck
            - CreateCommonResources.CommonBucketSNSTopic
            - CreateCommonResources.CommonS3Bucket
            - CreateCommonResources.CommonBucketPolicy
            - CreateCommonResources.CommonSNSpolicy
            - CreateCommonResources.CommonCloudTrail
            - CreateCommonResources.CreateSumoLogicAWSExplorerView
            - CreateCommonResources.SumoLogicSourceRole
            - CreateCommonResources.SumoLogicHostedCollector
            - CreateCommonResources.LambdaToDecideCWMetricsSources
            - CreateCommonResources.Primerinvoke
            - CreateCommonResources.CloudWatchMetricsFirstStack
            - CreateCommonResources.CloudWatchMetricsSecondStack
            - CreateCommonResources.CloudWatchMetricsFirstStack.SecondCloudwatchMetricsSource
            - CreateCommonResources.CloudWatchMetricsFirstStack.ThirdCloudwatchMetricsSource
            - CreateCommonResources.CloudWatchMetricsSecondStack.SecondCloudwatchMetricsSource
            - CreateCommonResources.ALBSource
            - CreateCommonResources.ALBSNSSubscription
            - CreateCommonResources.CloudTrailSource
            - CreateCommonResources.CloudTrailSNSSubscription
            - CreateCommonResources.CloudWatchEventFunction
            - CreateCommonResources.CloudWatchHTTPSource
            - RootCauseAppStack.RootCauseRole
            - RootCauseAppStack.SumoLogicHostedCollector
            - RootCauseAppStack.InventorySource
            - RootCauseAppStack.XraySource
            - CreateCommonResources.CloudWatchEventFunction.SumoCWDeadLetterQueue
            - CreateCommonResources.CloudWatchEventFunction.SumoCWEmailSNSTopic
            - CreateCommonResources.CloudWatchEventFunction.SumoCWEventsInvokeLambdaPermission
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLambdaExecutionRole
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLambdaPermission
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogGroup
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogSubsriptionFilter
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogsLambda
            - CreateCommonResources.CloudWatchEventFunction.SumoCWProcessDLQLambda
            - CreateCommonResources.CloudWatchEventFunction.SumoCWProcessDLQScheduleRule
            - CreateCommonResources.CloudWatchEventFunction.SumoCWSpilloverAlarm
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources
            - AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.AutoEnableAlbLogEventsInvokePermission
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.AutoEnableAlbLogEventsRuleTrigger
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.EnableExisitngAWSResourcesLambda
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.EnableNewAWSResourcesLambda
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.ExistingAWSResources
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.SumoLambdaRole
            - AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources.SumoCWLambdaInvokePermission
            - AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources.SumoLogGroupLambdaConnector
            - AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources.SumoLogGroupLambdaConnectorLambdaTrigger
            - AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources.SumoLogGroupLambdaConnectorLambdaTriggerPermission
            - AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources.SumoLogGroupLambdaConnectorRole
            - sumoEC2MetricsAppStack.EC2MetricRule
            - sumoEC2MetricsAppStack.sumoApp
            - sumoEC2MetricsAppStack.sumoOverview
            - sumoAlbMetricsAppStack.ALBMetricRule
            - sumoAlbMetricsAppStack.sumoApp
            - sumoDynamoDBMetricsAppStack.MetricRule
            - sumoDynamoDBMetricsAppStack.sumoApp
            - sumoRdsMetricsAppStack.ClusterMetricRule
            - sumoRdsMetricsAppStack.InstanceMetricRule
            - sumoRdsMetricsAppStack.sumoApp
            - sumoApiGatewayMetricsAppStack.MetricRule
            - sumoApiGatewayMetricsAppStack.sumoApp
            - RootCauseAppStack.sumoOverview
            - sumoLambdaMetricsAppStack.LambdaMetricRule
            - sumoLambdaMetricsAppStack.sumoApp
            - sumoLambdaMetricsAppStack.LambdaFieldExtractionRule
            - sumoAlbMetricsAppStack.AlbLogsFieldExtractionRule
            - sumoApiGatewayMetricsAppStack.FieldExtractionRule
            - sumoDynamoDBMetricsAppStack.FieldExtractionRule
            - sumoLambdaMetricsAppStack.LambdaCloudWatchLogsFieldExtractionRule
            - sumoRdsMetricsAppStack.FieldExtractionRule
            - sumoECSMetricsAppStack.FieldExtractionRule
            - sumoECSMetricsAppStack.MetricRule
            - sumoECSMetricsAppStack.sumoApp
            - sumoElasticCacheMetricsAppStack.FieldExtractionRule
            - sumoElasticCacheMetricsAppStack.MetricRule
            - sumoElasticCacheMetricsAppStack.sumoApp
      - AssertType: OutputsCheck
        Assert:
          Outputs:
            - CreateCommonResources.LambdaHelperARN
            - CreateCommonResources.EnterpriseCheck
            - CreateCommonResources.PaidAccountCheck
            - CreateCommonResources.Namespaces
            - CreateCommonResources.LambdaRoleARN
            - CreateCommonResources.BucketName
            - CreateCommonResources.CloudWatchLambdaARN
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogsLambdaArn
            - AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources.SumoLogGroupLambdaConnector
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.EnableExisitngAWSResourcesLambda
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.EnableNewAWSResourcesLambda
      - AssertType: ParameterCheck
        Assert:
          CreateCommonResources:
            AccountAlias: "test1env"
            CollectorName: "aws-observability-test1env-668508221233"
            CreateMetaDataSource: 'No'
            MetaDataSourceName: ""
            MetaDataSourceCategory: ""
            CreateCloudWatchMetricsSource:  'Yes'
            CloudWatchMetricsSourceName: 'cloudwatch-metrics-ap-south-1'
            CloudWatchMetricsNameSpaces: "AWS/ApiGateway, AWS/DynamoDB, AWS/ElastiCache"
            ScanInterval: "30000"
            CloudWatchMetricSourceCategory: "aws/observability/cloudwatch/metrics"
            CreateALBLogSource: 'Yes'
            CreateALBS3Bucket: 'Yes'
            ALBS3LogsBucketName: ""
            ALBS3BucketPathExpression: '/elasticloadbalancing/ap-south-1/*'
            ALBLogsSourceName: "alb-logs-ap-south-1"
            ALBLogsSourceCategory: "aws/observability/alb/logs"
            CreateCloudTrailLogSource: 'Yes'
            CreateCloudTrailBucket: 'Yes'
            CloudTrailLogsBucketName: ""
            CloudTrailBucketPathExpression: '/CloudTrail/ap-south-1/*'
            CloudTrailLogsSourceName: "cloudtrail-logs-ap-south-1"
            CloudTrailLogsSourceCategory: "aws/observability/cloudtrail/logs"
            CreateCloudWatchLogSource: 'Yes'
            CloudWatchLogsSourceName: "cloudwatch-logs-ap-south-1"
            CloudWatchLogsSourceCategory: "aws/observability/cloudwatch/logs"
          AutoEnableOptions:
            ALBAutoEnableS3Logs: 'Yes'
            ALBS3LogsBucketName: 'aws-observability-logs'
            AutoSubscribeLogGroups: 'Yes'
          AutoEnableOptions.AutoEnableS3LogsAlbAWSResources:
            BucketName: 'aws-observability-logs'
            AutoEnableResourceOptions: 'Both'
          AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources:
            UseExistingLogs: 'true'
          sumoEC2MetricsAppStack:
            Section2aInstallApp: 'Yes'
          sumoAlbMetricsAppStack:
            Section3aInstallApp: 'Yes'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aALBLogsAPIUrl: ''
            Section5bALBLogsSourceName: '*alb-logs*'
          sumoDynamoDBMetricsAppStack:
            Section2aInstallApp: 'Yes'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoRdsMetricsAppStack:
            Section2aInstallApp: 'Yes'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoApiGatewayMetricsAppStack:
            Section2aInstallApp: 'Yes'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          RootCauseAppStack:
            Section2aInstallApp: 'Yes'
            Section2bCollectorName: "aws-observability-test1env-668508221233"
            Section3aCreateAwsInventorySource: 'Yes'
            Section3bAwsInventorySourceName: "inventory-ap-south-1"
            Section3dInventorySourceCategory: "aws/observability/inventory"
            Section4aCreateAwsXRaySource: 'Yes'
            Section4bAwsXRaySourceName: "xray-ap-south-1"
            Section4cXraySourceCategory: "aws/observability/xray"
          sumoLambdaMetricsAppStack:
            Section2aAccountAlias: 'test1env'
            Section3aInstallApp: 'Yes'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aCloudTrailLogsAPIUrl: ''
            Section5bCloudTrailLogsSourceName: '*cloudtrail-logs*'
            Section6aCloudWatchLogsAPIUrl: ''
            Section6bCloudWatchLogsSourceName: '*cloudwatch-logs*'
          sumoECSMetricsAppStack:
            Section2aInstallApp: 'Yes'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoElasticCacheMetricsAppStack:
            Section2aInstallApp: 'Yes'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
  - TestName: nothingtoinstall
    Regions:
      - us-east-1
    Skip: false
    Parameters:
      Values:
        Section1aSumoLogicDeployment: 'us2'
        Section1bSumoLogicAccessID: '${PROFESSIONAL_US2_ACCESS_ID}'
        Section1cSumoLogicAccessKey: '${PROFESSIONAL_US2_ACCESS_KEY}'
        Section1dSumoLogicOrganizationId: '${US2_PROFESSIONAL_ORG_ID}'
        Section2aAccountAlias: 'test2env'
        Section3aInstallObservabilityApps: 'No'
        Section4aCreateMetricsSourcesOptions: 'None'
        Section5aAutoEnableS3LogsALBResourcesOptions: 'None'
        Section5bALBCreateLogSource: 'No'
        Section6aCreateCloudTrailLogSource: 'No'
        Section7aLambdaCreateCloudWatchLogsSource: 'No'
        Section8aCreateAwsXraySource: 'No'
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
            - CreateCommonResources
            - sumoEC2MetricsAppStack
            - sumoAlbMetricsAppStack
            - sumoDynamoDBMetricsAppStack
            - sumoRdsMetricsAppStack
            - sumoApiGatewayMetricsAppStack
            - RootCauseAppStack
            - sumoLambdaMetricsAppStack
            - sumoECSMetricsAppStack
            - sumoElasticCacheMetricsAppStack
            - CreateCommonResources.AddAccountField
            - CreateCommonResources.AddRegionField
            - CreateCommonResources.AddNamespaceField
            - sumoDynamoDBMetricsAppStack.AddTableNameField
            - sumoAlbMetricsAppStack.AddLoadBalancerField
            - sumoLambdaMetricsAppStack.AddFunctionNameField
            - sumoApiGatewayMetricsAppStack.AddApiNameField
            - sumoRdsMetricsAppStack.AddDBIdentifierField
            - sumoEC2MetricsAppStack.AddInstanceIdField
            - sumoECSMetricsAppStack.AddClusterNameField
            - sumoElasticCacheMetricsAppStack.AddCacheClusterIdField
            - CreateCommonResources.LambdaRole
            - CreateCommonResources.LambdaHelper
            - CreateCommonResources.AccountCheck
            - CreateCommonResources.CreateSumoLogicAWSExplorerView
            - CreateCommonResources.LambdaToDecideCWMetricsSources
            - CreateCommonResources.Primerinvoke
            - sumoEC2MetricsAppStack.EC2MetricRule
            - sumoAlbMetricsAppStack.ALBMetricRule
            - sumoDynamoDBMetricsAppStack.MetricRule
            - sumoRdsMetricsAppStack.ClusterMetricRule
            - sumoRdsMetricsAppStack.InstanceMetricRule
            - sumoApiGatewayMetricsAppStack.MetricRule
            - sumoLambdaMetricsAppStack.LambdaMetricRule
            - sumoECSMetricsAppStack.MetricRule
            - sumoElasticCacheMetricsAppStack.MetricRule
      - AssertType: OutputsCheck
        Assert:
          Outputs:
            - CreateCommonResources.LambdaHelperARN
            - CreateCommonResources.EnterpriseCheck
            - CreateCommonResources.LambdaRoleARN
            - CreateCommonResources.PaidAccountCheck
            - CreateCommonResources.Namespaces
      - AssertType: ParameterCheck
        Assert:
          CreateCommonResources:
            AccountAlias: "test2env"
            CollectorName: "aws-observability-test2env-668508221233"
            CreateMetaDataSource: 'No'
            MetaDataSourceName: ""
            MetaDataSourceCategory: ""
            CreateCloudWatchMetricsSource:  'No'
            CloudWatchMetricsSourceName: 'cloudwatch-metrics-us-east-1'
            CloudWatchMetricsNameSpaces: "AWS/ApplicationELB, AWS/ApiGateway, AWS/DynamoDB, AWS/Lambda, AWS/RDS, AWS/ECS, AWS/ElastiCache, AWS/ELB, AWS/NetworkELB"
            ScanInterval: "30000"
            CloudWatchMetricSourceCategory: "aws/observability/cloudwatch/metrics"
            CreateALBLogSource: 'No'
            CreateALBS3Bucket: 'No'
            ALBS3LogsBucketName: ""
            ALBS3BucketPathExpression: ''
            ALBLogsSourceName: "alb-logs-us-east-1"
            ALBLogsSourceCategory: "aws/observability/alb/logs"
            CreateCloudTrailLogSource: 'No'
            CreateCloudTrailBucket: 'No'
            CloudTrailLogsBucketName: ""
            CloudTrailBucketPathExpression: ''
            CloudTrailLogsSourceName: "cloudtrail-logs-us-east-1"
            CloudTrailLogsSourceCategory: "aws/observability/cloudtrail/logs"
            CreateCloudWatchLogSource: 'No'
            CloudWatchLogsSourceName: "cloudwatch-logs-us-east-1"
            CloudWatchLogsSourceCategory: "aws/observability/cloudwatch/logs"
          sumoEC2MetricsAppStack:
            Section2aInstallApp: 'No'
          sumoAlbMetricsAppStack:
            Section2aAccountAlias: 'test2env'
            Section3aInstallApp: 'No'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aALBLogsAPIUrl: ''
            Section5bALBLogsSourceName: ''
          sumoDynamoDBMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: ''
          sumoRdsMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: ''
          sumoApiGatewayMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: ''
          RootCauseAppStack:
            Section2aInstallApp: 'No'
            Section2bCollectorName: "aws-observability-test2env-668508221233"
            Section3aCreateAwsInventorySource: 'No'
            Section3bAwsInventorySourceName: "inventory-us-east-1"
            Section3dInventorySourceCategory: "aws/observability/inventory"
            Section4aCreateAwsXRaySource: 'No'
            Section4bAwsXRaySourceName: "xray-us-east-1"
            Section4cXraySourceCategory: "aws/observability/xray"
          sumoLambdaMetricsAppStack:
            Section2aAccountAlias: 'test2env'
            Section3aInstallApp: 'No'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aCloudTrailLogsAPIUrl: ''
            Section5bCloudTrailLogsSourceName: ''
            Section6aCloudWatchLogsAPIUrl: ''
            Section6bCloudWatchLogsSourceName: ''
          sumoECSMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: ''
          sumoElasticCacheMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: ''
  - TestName: nocloudtrailandinventory
    Regions:
      - us-east-2
    Skip: false
    Parameters:
      Values:
        Section1aSumoLogicDeployment: 'us2'
        Section1bSumoLogicAccessID: '${FREE_ACCOUNT_ACCESS_ID}'
        Section1cSumoLogicAccessKey: '${FREE_ACCOUNT_ACCESS_KEY}'
        Section1dSumoLogicOrganizationId: '${US2_FREE_ORG_ID}'
        Section2aAccountAlias: 'test3env'
        Section3aInstallObservabilityApps: 'Yes'
        Section4aCreateMetricsSourcesOptions: 'CloudWatchMetrics'
        Section5aAutoEnableS3LogsALBResourcesOptions: 'New'
        Section5bALBCreateLogSource: 'Yes'
        Section6aCreateCloudTrailLogSource: 'No'
        Section7aLambdaCreateCloudWatchLogsSource: 'Yes'
        Section7cAutoSubscribeLogGroupsLambdaOptions: 'New'
        Section8aCreateAwsXraySource: 'Yes'
        Section4bMetricsNameSpaces: 'AWS/ElastiCache, AWS/ELB, AWS/NetworkELB, AWS/ApplicationELB, AWS/RDS'
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
            - CreateCommonResources
            - AutoEnableOptions
            - sumoEC2MetricsAppStack
            - sumoAlbMetricsAppStack
            - sumoDynamoDBMetricsAppStack
            - sumoRdsMetricsAppStack
            - sumoApiGatewayMetricsAppStack
            - RootCauseAppStack
            - sumoLambdaMetricsAppStack
            - sumoECSMetricsAppStack
            - sumoElasticCacheMetricsAppStack
            - CreateCommonResources.AddAccountField
            - CreateCommonResources.AddRegionField
            - CreateCommonResources.AddNamespaceField
            - sumoDynamoDBMetricsAppStack.AddTableNameField
            - sumoAlbMetricsAppStack.AddLoadBalancerField
            - sumoLambdaMetricsAppStack.AddFunctionNameField
            - sumoApiGatewayMetricsAppStack.AddApiNameField
            - sumoRdsMetricsAppStack.AddDBIdentifierField
            - sumoEC2MetricsAppStack.AddInstanceIdField
            - sumoECSMetricsAppStack.AddClusterNameField
            - sumoElasticCacheMetricsAppStack.AddCacheClusterIdField
            - CreateCommonResources.LambdaRole
            - CreateCommonResources.LambdaHelper
            - CreateCommonResources.AccountCheck
            - CreateCommonResources.CommonBucketSNSTopic
            - CreateCommonResources.CommonS3Bucket
            - CreateCommonResources.CommonBucketPolicy
            - CreateCommonResources.CommonSNSpolicy
            - CreateCommonResources.CreateSumoLogicAWSExplorerView
            - CreateCommonResources.SumoLogicSourceRole
            - CreateCommonResources.SumoLogicHostedCollector
            - CreateCommonResources.LambdaToDecideCWMetricsSources
            - CreateCommonResources.Primerinvoke
            - CreateCommonResources.CloudWatchMetricsFirstStack
            - CreateCommonResources.CloudWatchMetricsSecondStack
            - CreateCommonResources.CloudWatchMetricsFirstStack.FirstCloudwatchMetricsSource
            - CreateCommonResources.CloudWatchMetricsFirstStack.FifthCloudwatchMetricsSource
            - CreateCommonResources.CloudWatchMetricsSecondStack.SecondCloudwatchMetricsSource
            - CreateCommonResources.CloudWatchMetricsSecondStack.ThirdCloudwatchMetricsSource
            - CreateCommonResources.CloudWatchMetricsSecondStack.FourthCloudwatchMetricsSource
            - CreateCommonResources.ALBSource
            - CreateCommonResources.ALBSNSSubscription
            - CreateCommonResources.CloudWatchEventFunction
            - CreateCommonResources.CloudWatchHTTPSource
            - CreateCommonResources.CloudWatchEventFunction.SumoCWDeadLetterQueue
            - CreateCommonResources.CloudWatchEventFunction.SumoCWEmailSNSTopic
            - CreateCommonResources.CloudWatchEventFunction.SumoCWEventsInvokeLambdaPermission
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLambdaExecutionRole
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLambdaPermission
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogGroup
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogSubsriptionFilter
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogsLambda
            - CreateCommonResources.CloudWatchEventFunction.SumoCWProcessDLQLambda
            - CreateCommonResources.CloudWatchEventFunction.SumoCWProcessDLQScheduleRule
            - CreateCommonResources.CloudWatchEventFunction.SumoCWSpilloverAlarm
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources
            - AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.AutoEnableAlbLogEventsInvokePermission
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.AutoEnableAlbLogEventsRuleTrigger
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.EnableNewAWSResourcesLambda
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.SumoLambdaRole
            - AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources.SumoCWLambdaInvokePermission
            - AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources.SumoLogGroupLambdaConnector
            - AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources.SumoLogGroupLambdaConnectorLambdaTrigger
            - AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources.SumoLogGroupLambdaConnectorLambdaTriggerPermission
            - AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources.SumoLogGroupLambdaConnectorRole
            - sumoEC2MetricsAppStack.EC2MetricRule
            - sumoAlbMetricsAppStack.ALBMetricRule
            - sumoDynamoDBMetricsAppStack.MetricRule
            - sumoRdsMetricsAppStack.ClusterMetricRule
            - sumoRdsMetricsAppStack.InstanceMetricRule
            - sumoApiGatewayMetricsAppStack.MetricRule
            - sumoLambdaMetricsAppStack.LambdaMetricRule
            - sumoAlbMetricsAppStack.AlbLogsFieldExtractionRule
            - sumoLambdaMetricsAppStack.LambdaCloudWatchLogsFieldExtractionRule
            - sumoECSMetricsAppStack.MetricRule
            - sumoElasticCacheMetricsAppStack.MetricRule
      - AssertType: OutputsCheck
        Assert:
          Outputs:
            - CreateCommonResources.LambdaHelperARN
            - CreateCommonResources.EnterpriseCheck
            - CreateCommonResources.PaidAccountCheck
            - CreateCommonResources.Namespaces
            - CreateCommonResources.LambdaRoleARN
            - CreateCommonResources.BucketName
            - CreateCommonResources.CloudWatchLambdaARN
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogsLambdaArn
            - AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources.SumoLogGroupLambdaConnector
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.EnableNewAWSResourcesLambda
      - AssertType: ParameterCheck
        Assert:
          CreateCommonResources:
            AccountAlias: "test3env"
            CollectorName: "aws-observability-test3env-668508221233"
            CreateMetaDataSource: 'No'
            MetaDataSourceName: ""
            MetaDataSourceCategory: ""
            CreateCloudWatchMetricsSource:  'Yes'
            CloudWatchMetricsSourceName: 'cloudwatch-metrics-us-east-2'
            CloudWatchMetricsNameSpaces: "AWS/ElastiCache, AWS/ELB, AWS/NetworkELB, AWS/ApplicationELB, AWS/RDS"
            ScanInterval: "30000"
            CloudWatchMetricSourceCategory: "aws/observability/cloudwatch/metrics"
            CreateALBLogSource: 'Yes'
            CreateALBS3Bucket: 'Yes'
            ALBS3LogsBucketName: ""
            ALBS3BucketPathExpression: '/elasticloadbalancing/us-east-2/*'
            ALBLogsSourceName: "alb-logs-us-east-2"
            ALBLogsSourceCategory: "aws/observability/alb/logs"
            CreateCloudTrailLogSource: 'No'
            CreateCloudTrailBucket: 'No'
            CloudTrailLogsBucketName: ""
            CloudTrailBucketPathExpression: ''
            CloudTrailLogsSourceName: "cloudtrail-logs-us-east-2"
            CloudTrailLogsSourceCategory: "aws/observability/cloudtrail/logs"
            CreateCloudWatchLogSource: 'Yes'
            CloudWatchLogsSourceName: "cloudwatch-logs-us-east-2"
            CloudWatchLogsSourceCategory: "aws/observability/cloudwatch/logs"
          AutoEnableOptions:
            ALBAutoEnableS3Logs: 'Yes'
            ALBS3LogsBucketName: 'aws-observability-logs'
            AutoSubscribeLogGroups: 'Yes'
          AutoEnableOptions.AutoEnableS3LogsAlbAWSResources:
            BucketName: 'aws-observability-logs'
            AutoEnableResourceOptions: 'New'
          AutoEnableOptions.AutoSubscribeLambdaLogGroupsAWSResources:
            UseExistingLogs: 'false'
          sumoEC2MetricsAppStack:
            Section2aInstallApp: 'No'
          sumoAlbMetricsAppStack:
            Section2aAccountAlias: 'test3env'
            Section3aInstallApp: 'No'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aALBLogsAPIUrl: ''
            Section5bALBLogsSourceName: '*alb-logs*'
          sumoDynamoDBMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: ''
          sumoRdsMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: ''
          sumoApiGatewayMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: ''
          RootCauseAppStack:
            Section2aInstallApp: 'No'
            Section2bCollectorName: "aws-observability-test3env-668508221233"
            Section3aCreateAwsInventorySource: 'No'
            Section3bAwsInventorySourceName: "inventory-us-east-2"
            Section3dInventorySourceCategory: "aws/observability/inventory"
            Section4aCreateAwsXRaySource: 'No'
            Section4bAwsXRaySourceName: "xray-us-east-2"
            Section4cXraySourceCategory: "aws/observability/xray"
          sumoLambdaMetricsAppStack:
            Section2aAccountAlias: 'test3env'
            Section3aInstallApp: 'No'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aCloudTrailLogsAPIUrl: ''
            Section5bCloudTrailLogsSourceName: ''
            Section6aCloudWatchLogsAPIUrl: ''
            Section6bCloudWatchLogsSourceName: '*cloudwatch-logs*'
          sumoECSMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: ''
          sumoElasticCacheMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: ''
  - TestName: onlycloudtrailinventorysource
    Regions:
      - ap-south-1
    Skip: false
    Parameters:
      Values:
        Section1aSumoLogicDeployment: 'us1'
        Section1bSumoLogicAccessID: '${ENTERPRISE_US1_ACCESS_ID_1}'
        Section1cSumoLogicAccessKey: '${ENTERPRISE_US1_ACCESS_KEY_1}'
        Section1dSumoLogicOrganizationId: '${US1_ENTERPRISE_ORG_ID}'
        Section2aAccountAlias: 'test4env'
        Section3aInstallObservabilityApps: 'No'
        Section4aCreateMetricsSourcesOptions: 'InventorySource'
        Section5aAutoEnableS3LogsALBResourcesOptions: 'New'
        Section5bALBCreateLogSource: 'No'
        Section6aCreateCloudTrailLogSource: 'Yes'
        Section7aLambdaCreateCloudWatchLogsSource: 'Yes'
        Section7cAutoSubscribeLogGroupsLambdaOptions: 'Existing'
        Section8aCreateAwsXraySource: 'No'
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
            - CreateCommonResources
            - sumoEC2MetricsAppStack
            - sumoAlbMetricsAppStack
            - sumoDynamoDBMetricsAppStack
            - sumoRdsMetricsAppStack
            - sumoApiGatewayMetricsAppStack
            - RootCauseAppStack
            - sumoLambdaMetricsAppStack
            - sumoECSMetricsAppStack
            - sumoElasticCacheMetricsAppStack
            - CreateCommonResources.AddAccountField
            - CreateCommonResources.AddRegionField
            - CreateCommonResources.AddNamespaceField
            - sumoDynamoDBMetricsAppStack.AddTableNameField
            - sumoAlbMetricsAppStack.AddLoadBalancerField
            - sumoLambdaMetricsAppStack.AddFunctionNameField
            - sumoApiGatewayMetricsAppStack.AddApiNameField
            - sumoRdsMetricsAppStack.AddDBIdentifierField
            - sumoEC2MetricsAppStack.AddInstanceIdField
            - sumoECSMetricsAppStack.AddClusterNameField
            - sumoElasticCacheMetricsAppStack.AddCacheClusterIdField
            - CreateCommonResources.LambdaRole
            - CreateCommonResources.LambdaHelper
            - CreateCommonResources.AccountCheck
            - CreateCommonResources.CommonBucketSNSTopic
            - CreateCommonResources.CommonS3Bucket
            - CreateCommonResources.CommonBucketPolicy
            - CreateCommonResources.CommonSNSpolicy
            - CreateCommonResources.CommonCloudTrail
            - CreateCommonResources.CreateSumoLogicAWSExplorerView
            - CreateCommonResources.SumoLogicSourceRole
            - CreateCommonResources.SumoLogicHostedCollector
            - CreateCommonResources.LambdaToDecideCWMetricsSources
            - CreateCommonResources.Primerinvoke
            - CreateCommonResources.CloudTrailSource
            - CreateCommonResources.CloudTrailSNSSubscription
            - CreateCommonResources.CloudWatchEventFunction
            - CreateCommonResources.CloudWatchHTTPSource
            - RootCauseAppStack.RootCauseRole
            - RootCauseAppStack.SumoLogicHostedCollector
            - RootCauseAppStack.InventorySource
            - CreateCommonResources.CloudWatchEventFunction.SumoCWDeadLetterQueue
            - CreateCommonResources.CloudWatchEventFunction.SumoCWEmailSNSTopic
            - CreateCommonResources.CloudWatchEventFunction.SumoCWEventsInvokeLambdaPermission
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLambdaExecutionRole
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLambdaPermission
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogGroup
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogSubsriptionFilter
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogsLambda
            - CreateCommonResources.CloudWatchEventFunction.SumoCWProcessDLQLambda
            - CreateCommonResources.CloudWatchEventFunction.SumoCWProcessDLQScheduleRule
            - CreateCommonResources.CloudWatchEventFunction.SumoCWSpilloverAlarm
            - sumoEC2MetricsAppStack.EC2MetricRule
            - sumoAlbMetricsAppStack.ALBMetricRule
            - sumoDynamoDBMetricsAppStack.MetricRule
            - sumoRdsMetricsAppStack.ClusterMetricRule
            - sumoRdsMetricsAppStack.InstanceMetricRule
            - sumoApiGatewayMetricsAppStack.MetricRule
            - sumoLambdaMetricsAppStack.LambdaMetricRule
            - sumoLambdaMetricsAppStack.LambdaFieldExtractionRule
            - sumoApiGatewayMetricsAppStack.FieldExtractionRule
            - sumoDynamoDBMetricsAppStack.FieldExtractionRule
            - sumoLambdaMetricsAppStack.LambdaCloudWatchLogsFieldExtractionRule
            - sumoRdsMetricsAppStack.FieldExtractionRule
            - sumoECSMetricsAppStack.FieldExtractionRule
            - sumoECSMetricsAppStack.MetricRule
            - sumoElasticCacheMetricsAppStack.FieldExtractionRule
            - sumoElasticCacheMetricsAppStack.MetricRule
      - AssertType: OutputsCheck
        Assert:
          Outputs:
            - CreateCommonResources.LambdaHelperARN
            - CreateCommonResources.EnterpriseCheck
            - CreateCommonResources.PaidAccountCheck
            - CreateCommonResources.Namespaces
            - CreateCommonResources.LambdaRoleARN
            - CreateCommonResources.BucketName
            - CreateCommonResources.CloudWatchLambdaARN
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogsLambdaArn
      - AssertType: ParameterCheck
        Assert:
          CreateCommonResources:
            AccountAlias: "test4env"
            CollectorName: "aws-observability-test4env-668508221233"
            CreateMetaDataSource: 'No'
            MetaDataSourceName: ""
            MetaDataSourceCategory: ""
            CreateCloudWatchMetricsSource:  'No'
            CloudWatchMetricsSourceName: 'cloudwatch-metrics-ap-south-1'
            CloudWatchMetricsNameSpaces: "AWS/ApplicationELB, AWS/ApiGateway, AWS/DynamoDB, AWS/Lambda, AWS/RDS, AWS/ECS, AWS/ElastiCache, AWS/ELB, AWS/NetworkELB"
            ScanInterval: "30000"
            CloudWatchMetricSourceCategory: "aws/observability/cloudwatch/metrics"
            CreateALBLogSource: 'No'
            CreateALBS3Bucket: 'No'
            ALBS3LogsBucketName: ""
            ALBS3BucketPathExpression: ''
            ALBLogsSourceName: "alb-logs-ap-south-1"
            ALBLogsSourceCategory: "aws/observability/alb/logs"
            CreateCloudTrailLogSource: 'Yes'
            CreateCloudTrailBucket: 'Yes'
            CloudTrailLogsBucketName: ""
            CloudTrailBucketPathExpression: '/CloudTrail/ap-south-1/*'
            CloudTrailLogsSourceName: "cloudtrail-logs-ap-south-1"
            CloudTrailLogsSourceCategory: "aws/observability/cloudtrail/logs"
            CreateCloudWatchLogSource: 'Yes'
            CloudWatchLogsSourceName: "cloudwatch-logs-ap-south-1"
            CloudWatchLogsSourceCategory: "aws/observability/cloudwatch/logs"
          sumoEC2MetricsAppStack:
            Section2aInstallApp: 'No'
          sumoAlbMetricsAppStack:
            Section2aAccountAlias: 'test4env'
            Section3aInstallApp: 'No'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aALBLogsAPIUrl: ''
            Section5bALBLogsSourceName: ''
          sumoDynamoDBMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoRdsMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoApiGatewayMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          RootCauseAppStack:
            Section2aInstallApp: 'No'
            Section2bCollectorName: "aws-observability-test4env-668508221233"
            Section3aCreateAwsInventorySource: 'Yes'
            Section3bAwsInventorySourceName: "inventory-ap-south-1"
            Section3dInventorySourceCategory: "aws/observability/inventory"
            Section4aCreateAwsXRaySource: 'No'
            Section4bAwsXRaySourceName: "xray-ap-south-1"
            Section4cXraySourceCategory: "aws/observability/xray"
          sumoLambdaMetricsAppStack:
            Section2aAccountAlias: 'test4env'
            Section3aInstallApp: 'No'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aCloudTrailLogsAPIUrl: ''
            Section5bCloudTrailLogsSourceName: '*cloudtrail-logs*'
            Section6aCloudWatchLogsAPIUrl: ''
            Section6bCloudWatchLogsSourceName: '*cloudwatch-logs*'
          sumoECSMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoElasticCacheMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
  - TestName: existingsourcewithalbbucket
    Regions:
      - us-east-1
    Skip: false
    Parameters:
      Values:
        Section1aSumoLogicDeployment: 'us2'
        Section1bSumoLogicAccessID: '${FREE_ACCOUNT_ACCESS_ID}'
        Section1cSumoLogicAccessKey: '${FREE_ACCOUNT_ACCESS_KEY}'
        Section1dSumoLogicOrganizationId: '${US2_FREE_ORG_ID}'
        Section2aAccountAlias: 'test5env'
        Section3aInstallObservabilityApps: 'No'
        Section4aCreateMetricsSourcesOptions: 'None'
        Section4cCloudWatchExistingSourceAPIUrl: 'https://api.us2.sumologic.com/api/v1/collectors/167776029/sources/841621157'
        Section5aAutoEnableS3LogsALBResourcesOptions: 'Existing'
        Section5bALBCreateLogSource: 'Yes'
        Section5dALBS3LogsBucketName: 'cf-templates-1qpf3unpuo1hw-us-east-1'
        Section5eALBS3BucketPathExpression: '*abc*'
        Section6aCreateCloudTrailLogSource: 'Yes'
        Section7aLambdaCreateCloudWatchLogsSource: 'No'
        Section7bLambdaCloudWatchLogsSourceUrl: 'https://api.us2.sumologic.com/api/v1/collectors/167776029/sources/1169994000'
        Section7cAutoSubscribeLogGroupsLambdaOptions: 'Existing'
        Section8aCreateAwsXraySource: 'Yes'
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
            - CreateCommonResources
            - AutoEnableOptions
            - sumoEC2MetricsAppStack
            - sumoAlbMetricsAppStack
            - sumoDynamoDBMetricsAppStack
            - sumoRdsMetricsAppStack
            - sumoApiGatewayMetricsAppStack
            - RootCauseAppStack
            - sumoLambdaMetricsAppStack
            - sumoECSMetricsAppStack
            - sumoElasticCacheMetricsAppStack
            - CreateCommonResources.AddAccountField
            - CreateCommonResources.AddRegionField
            - CreateCommonResources.AddNamespaceField
            - sumoDynamoDBMetricsAppStack.AddTableNameField
            - sumoAlbMetricsAppStack.AddLoadBalancerField
            - sumoLambdaMetricsAppStack.AddFunctionNameField
            - sumoApiGatewayMetricsAppStack.AddApiNameField
            - sumoRdsMetricsAppStack.AddDBIdentifierField
            - sumoEC2MetricsAppStack.AddInstanceIdField
            - sumoECSMetricsAppStack.AddClusterNameField
            - sumoElasticCacheMetricsAppStack.AddCacheClusterIdField
            - CreateCommonResources.LambdaRole
            - CreateCommonResources.LambdaHelper
            - CreateCommonResources.AccountCheck
            - CreateCommonResources.CommonBucketSNSTopic
            - CreateCommonResources.CommonS3Bucket
            - CreateCommonResources.CommonBucketPolicy
            - CreateCommonResources.CommonSNSpolicy
            - CreateCommonResources.CommonCloudTrail
            - CreateCommonResources.CreateSumoLogicAWSExplorerView
            - CreateCommonResources.SumoLogicSourceRole
            - CreateCommonResources.SumoLogicHostedCollector
            - CreateCommonResources.LambdaToDecideCWMetricsSources
            - CreateCommonResources.Primerinvoke
            - CreateCommonResources.ALBSource
            - CreateCommonResources.ALBSNSTopic
            - CreateCommonResources.ALBSNSpolicy
            - CreateCommonResources.ALBSNSSubscription
            - CreateCommonResources.CloudTrailSource
            - CreateCommonResources.CloudTrailSNSSubscription
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.EnableExisitngAWSResourcesLambda
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.ExistingAWSResources
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.SumoLambdaRole
            - sumoEC2MetricsAppStack.EC2MetricRule
            - sumoAlbMetricsAppStack.ALBMetricRule
            - sumoAlbMetricsAppStack.SumoALBMetricsUpdateSource
            - sumoDynamoDBMetricsAppStack.MetricRule
            - sumoRdsMetricsAppStack.ClusterMetricRule
            - sumoRdsMetricsAppStack.InstanceMetricRule
            - sumoApiGatewayMetricsAppStack.MetricRule
            - sumoLambdaMetricsAppStack.LambdaMetricRule
            - sumoLambdaMetricsAppStack.SumoHTTPUpdateSource
            - sumoLambdaMetricsAppStack.LambdaFieldExtractionRule
            - sumoAlbMetricsAppStack.AlbLogsFieldExtractionRule
            - sumoApiGatewayMetricsAppStack.FieldExtractionRule
            - sumoDynamoDBMetricsAppStack.FieldExtractionRule
            - sumoLambdaMetricsAppStack.LambdaCloudWatchLogsFieldExtractionRule
            - sumoRdsMetricsAppStack.FieldExtractionRule
            - sumoECSMetricsAppStack.FieldExtractionRule
            - sumoECSMetricsAppStack.MetricRule
            - sumoElasticCacheMetricsAppStack.FieldExtractionRule
            - sumoElasticCacheMetricsAppStack.MetricRule
      - AssertType: OutputsCheck
        Assert:
          Outputs:
            - CreateCommonResources.LambdaHelperARN
            - CreateCommonResources.EnterpriseCheck
            - CreateCommonResources.PaidAccountCheck
            - CreateCommonResources.Namespaces
            - CreateCommonResources.LambdaRoleARN
            - CreateCommonResources.BucketName
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.EnableExisitngAWSResourcesLambda
            - sumoLambdaMetricsAppStack.ExistingCloudWatchLogSourceName
            - sumoAlbMetricsAppStack.ExistingMetricSourceName
      - AssertType: ParameterCheck
        Assert:
          CreateCommonResources:
            AccountAlias: "test5env"
            CollectorName: "aws-observability-test5env-668508221233"
            CreateMetaDataSource: 'No'
            MetaDataSourceName: ""
            MetaDataSourceCategory: ""
            CreateCloudWatchMetricsSource:  'No'
            CloudWatchMetricsSourceName: 'cloudwatch-metrics-us-east-1'
            CloudWatchMetricsNameSpaces: "AWS/ApplicationELB, AWS/ApiGateway, AWS/DynamoDB, AWS/Lambda, AWS/RDS, AWS/ECS, AWS/ElastiCache, AWS/ELB, AWS/NetworkELB"
            ScanInterval: "30000"
            CloudWatchMetricSourceCategory: "aws/observability/cloudwatch/metrics"
            CreateALBLogSource: 'Yes'
            CreateALBS3Bucket: 'No'
            ALBS3LogsBucketName: "cf-templates-1qpf3unpuo1hw-us-east-1"
            ALBS3BucketPathExpression: '/elasticloadbalancing/us-east-1/*'
            ALBLogsSourceName: "alb-logs-us-east-1"
            ALBLogsSourceCategory: "aws/observability/alb/logs"
            CreateCloudTrailLogSource: 'Yes'
            CreateCloudTrailBucket: 'Yes'
            CloudTrailLogsBucketName: ""
            CloudTrailBucketPathExpression: '/CloudTrail/us-east-1/*'
            CloudTrailLogsSourceName: "cloudtrail-logs-us-east-1"
            CloudTrailLogsSourceCategory: "aws/observability/cloudtrail/logs"
            CreateCloudWatchLogSource: 'No'
            CloudWatchLogsSourceName: "cloudwatch-logs-us-east-1"
            CloudWatchLogsSourceCategory: "aws/observability/cloudwatch/logs"
          AutoEnableOptions:
            ALBAutoEnableS3Logs: 'Yes'
            ALBS3LogsBucketName: 'cf-templates-1qpf3unpuo1hw-us-east-1'
            AutoSubscribeLogGroups: 'No'
          AutoEnableOptions.AutoEnableS3LogsAlbAWSResources:
            BucketName: 'cf-templates-1qpf3unpuo1hw-us-east-1'
            AutoEnableResourceOptions: 'Existing'
          sumoEC2MetricsAppStack:
            Section2aInstallApp: 'No'
          sumoAlbMetricsAppStack:
            Section2aAccountAlias: 'test5env'
            Section3aInstallApp: 'No'
            Section4aCloudWatchExistingSourceAPIUrl: 'https://api.us2.sumologic.com/api/v1/collectors/167776029/sources/841621157'
            Section5aALBLogsAPIUrl: ''
            Section5bALBLogsSourceName: '*alb-logs*'
          sumoDynamoDBMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoRdsMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoApiGatewayMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          RootCauseAppStack:
            Section2aInstallApp: 'No'
            Section2bCollectorName: "aws-observability-test5env-668508221233"
            Section3aCreateAwsInventorySource: 'No'
            Section3bAwsInventorySourceName: "inventory-us-east-1"
            Section3dInventorySourceCategory: "aws/observability/inventory"
            Section4aCreateAwsXRaySource: 'No'
            Section4bAwsXRaySourceName: "xray-us-east-1"
            Section4cXraySourceCategory: "aws/observability/xray"
          sumoLambdaMetricsAppStack:
            Section2aAccountAlias: 'test5env'
            Section3aInstallApp: 'No'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aCloudTrailLogsAPIUrl: ''
            Section5bCloudTrailLogsSourceName: '*cloudtrail-logs*'
            Section6aCloudWatchLogsAPIUrl: 'https://api.us2.sumologic.com/api/v1/collectors/167776029/sources/1169994000'
            Section6bCloudWatchLogsSourceName: ''
          sumoECSMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoElasticCacheMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
  - TestName: existingcloudtrailbucket
    Regions:
      - us-east-2
    Skip: false
    Parameters:
      Values:
        Section1aSumoLogicDeployment: 'us1'
        Section1bSumoLogicAccessID: '${ENTERPRISE_US1_ACCESS_ID_2}'
        Section1cSumoLogicAccessKey: '${ENTERPRISE_US1_ACCESS_KEY_2}'
        Section1dSumoLogicOrganizationId: '${US1_ENTERPRISE_ORG_ID}'
        Section2aAccountAlias: 'test6env'
        Section3aInstallObservabilityApps: 'No'
        Section4aCreateMetricsSourcesOptions: 'Both'
        Section5aAutoEnableS3LogsALBResourcesOptions: 'None'
        Section5bALBCreateLogSource: 'Yes'
        Section6aCreateCloudTrailLogSource: 'Yes'
        Section6cCloudTrailLogsBucketName: 'cf-templates-1qpf3unpuo1hw-us-east-2'
        Section6dCloudTrailBucketPathExpression: '*abc*'
        Section7aLambdaCreateCloudWatchLogsSource: 'No'
        Section8aCreateAwsXraySource: 'No'
        Section4bMetricsNameSpaces: 'AWS/ApiGateway, AWS/DynamoDB, AWS/ElastiCache'
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
            - CreateCommonResources
            - sumoEC2MetricsAppStack
            - sumoAlbMetricsAppStack
            - sumoDynamoDBMetricsAppStack
            - sumoRdsMetricsAppStack
            - sumoApiGatewayMetricsAppStack
            - RootCauseAppStack
            - sumoLambdaMetricsAppStack
            - sumoECSMetricsAppStack
            - sumoElasticCacheMetricsAppStack
            - CreateCommonResources.AddAccountField
            - CreateCommonResources.AddRegionField
            - CreateCommonResources.AddNamespaceField
            - sumoDynamoDBMetricsAppStack.AddTableNameField
            - sumoAlbMetricsAppStack.AddLoadBalancerField
            - sumoLambdaMetricsAppStack.AddFunctionNameField
            - sumoApiGatewayMetricsAppStack.AddApiNameField
            - sumoRdsMetricsAppStack.AddDBIdentifierField
            - sumoEC2MetricsAppStack.AddInstanceIdField
            - sumoECSMetricsAppStack.AddClusterNameField
            - sumoElasticCacheMetricsAppStack.AddCacheClusterIdField
            - CreateCommonResources.LambdaRole
            - CreateCommonResources.LambdaHelper
            - CreateCommonResources.AccountCheck
            - CreateCommonResources.CommonBucketSNSTopic
            - CreateCommonResources.CommonS3Bucket
            - CreateCommonResources.CommonBucketPolicy
            - CreateCommonResources.CommonSNSpolicy
            - CreateCommonResources.CreateSumoLogicAWSExplorerView
            - CreateCommonResources.SumoLogicSourceRole
            - CreateCommonResources.SumoLogicHostedCollector
            - CreateCommonResources.LambdaToDecideCWMetricsSources
            - CreateCommonResources.Primerinvoke
            - CreateCommonResources.CloudWatchMetricsFirstStack
            - CreateCommonResources.CloudWatchMetricsSecondStack
            - CreateCommonResources.CloudWatchMetricsFirstStack.SecondCloudwatchMetricsSource
            - CreateCommonResources.CloudWatchMetricsFirstStack.ThirdCloudwatchMetricsSource
            - CreateCommonResources.CloudWatchMetricsSecondStack.SecondCloudwatchMetricsSource
            - CreateCommonResources.ALBSource
            - CreateCommonResources.ALBSNSSubscription
            - CreateCommonResources.CloudTrailSource
            - CreateCommonResources.CloudTrailSNSTopic
            - CreateCommonResources.CloudTrailSNSpolicy
            - CreateCommonResources.CloudTrailSNSSubscription
            - RootCauseAppStack.RootCauseRole
            - RootCauseAppStack.SumoLogicHostedCollector
            - RootCauseAppStack.InventorySource
            - sumoEC2MetricsAppStack.EC2MetricRule
            - sumoAlbMetricsAppStack.ALBMetricRule
            - sumoDynamoDBMetricsAppStack.MetricRule
            - sumoRdsMetricsAppStack.ClusterMetricRule
            - sumoRdsMetricsAppStack.InstanceMetricRule
            - sumoApiGatewayMetricsAppStack.MetricRule
            - sumoLambdaMetricsAppStack.LambdaMetricRule
            - sumoLambdaMetricsAppStack.LambdaFieldExtractionRule
            - sumoAlbMetricsAppStack.AlbLogsFieldExtractionRule
            - sumoApiGatewayMetricsAppStack.FieldExtractionRule
            - sumoDynamoDBMetricsAppStack.FieldExtractionRule
            - sumoRdsMetricsAppStack.FieldExtractionRule
            - sumoECSMetricsAppStack.FieldExtractionRule
            - sumoECSMetricsAppStack.MetricRule
            - sumoElasticCacheMetricsAppStack.FieldExtractionRule
            - sumoElasticCacheMetricsAppStack.MetricRule
      - AssertType: OutputsCheck
        Assert:
          Outputs:
            - CreateCommonResources.LambdaHelperARN
            - CreateCommonResources.EnterpriseCheck
            - CreateCommonResources.PaidAccountCheck
            - CreateCommonResources.Namespaces
            - CreateCommonResources.LambdaRoleARN
            - CreateCommonResources.BucketName
      - AssertType: ParameterCheck
        Assert:
          CreateCommonResources:
            AccountAlias: "test6env"
            CollectorName: "aws-observability-test6env-668508221233"
            CreateMetaDataSource: 'No'
            MetaDataSourceName: ""
            MetaDataSourceCategory: ""
            CreateCloudWatchMetricsSource:  'Yes'
            CloudWatchMetricsSourceName: 'cloudwatch-metrics-us-east-2'
            CloudWatchMetricsNameSpaces: "AWS/ApiGateway, AWS/DynamoDB, AWS/ElastiCache"
            ScanInterval: "30000"
            CloudWatchMetricSourceCategory: "aws/observability/cloudwatch/metrics"
            CreateALBLogSource: 'Yes'
            CreateALBS3Bucket: 'Yes'
            ALBS3LogsBucketName: ""
            ALBS3BucketPathExpression: '*AWSLogs/*/elasticloadbalancing/*'
            ALBLogsSourceName: "alb-logs-us-east-2"
            ALBLogsSourceCategory: "aws/observability/alb/logs"
            CreateCloudTrailLogSource: 'Yes'
            CreateCloudTrailBucket: 'No'
            CloudTrailLogsBucketName: "cf-templates-1qpf3unpuo1hw-us-east-2"
            CloudTrailBucketPathExpression: '*abc*'
            CloudTrailLogsSourceName: "cloudtrail-logs-us-east-2"
            CloudTrailLogsSourceCategory: "aws/observability/cloudtrail/logs"
            CreateCloudWatchLogSource: 'No'
            CloudWatchLogsSourceName: "cloudwatch-logs-us-east-2"
            CloudWatchLogsSourceCategory: "aws/observability/cloudwatch/logs"
          sumoEC2MetricsAppStack:
            Section2aInstallApp: 'No'
          sumoAlbMetricsAppStack:
            Section2aAccountAlias: 'test6env'
            Section3aInstallApp: 'No'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aALBLogsAPIUrl: ''
            Section5bALBLogsSourceName: '*alb-logs*'
          sumoDynamoDBMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoRdsMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoApiGatewayMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          RootCauseAppStack:
            Section2aInstallApp: 'No'
            Section2bCollectorName: "aws-observability-test6env-668508221233"
            Section3aCreateAwsInventorySource: 'Yes'
            Section3bAwsInventorySourceName: "inventory-us-east-2"
            Section3dInventorySourceCategory: "aws/observability/inventory"
            Section4aCreateAwsXRaySource: 'No'
            Section4bAwsXRaySourceName: "xray-us-east-2"
            Section4cXraySourceCategory: "aws/observability/xray"
          sumoLambdaMetricsAppStack:
            Section2aAccountAlias: 'test6env'
            Section3aInstallApp: 'No'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aCloudTrailLogsAPIUrl: ''
            Section5bCloudTrailLogsSourceName: '*cloudtrail-logs*'
            Section6aCloudWatchLogsAPIUrl: ''
            Section6bCloudWatchLogsSourceName: ''
          sumoECSMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoElasticCacheMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
  - TestName: existingcloudtrailalbsource
    Regions:
      - ap-south-1
    Skip: false
    Parameters:
      Values:
        Section1aSumoLogicDeployment: 'us2'
        Section1bSumoLogicAccessID: '${PROFESSIONAL_US2_ACCESS_ID}'
        Section1cSumoLogicAccessKey: '${PROFESSIONAL_US2_ACCESS_KEY}'
        Section1dSumoLogicOrganizationId: '${US2_PROFESSIONAL_ORG_ID}'
        Section2aAccountAlias: 'test7env'
        Section3aInstallObservabilityApps: 'Yes'
        Section4aCreateMetricsSourcesOptions: 'InventorySource'
        Section5aAutoEnableS3LogsALBResourcesOptions: 'Both'
        Section5bALBCreateLogSource: 'No'
        Section5cALBLogsSourceUrl: 'https://api.us2.sumologic.com/api/v1/collectors/194268335/sources/1135631121'
        Section5dALBS3LogsBucketName: 'cf-templates-1qpf3unpuo1hw-ap-south-1'
        Section6aCreateCloudTrailLogSource: 'No'
        Section6bCloudTrailLogsSourceUrl: 'https://api.us2.sumologic.com/api/v1/collectors/194268335/sources/1135631970'
        Section7aLambdaCreateCloudWatchLogsSource: 'No'
        Section8aCreateAwsXraySource: 'Yes'
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
            - CreateCommonResources
            - AutoEnableOptions
            - sumoEC2MetricsAppStack
            - sumoAlbMetricsAppStack
            - sumoDynamoDBMetricsAppStack
            - sumoRdsMetricsAppStack
            - sumoApiGatewayMetricsAppStack
            - RootCauseAppStack
            - sumoLambdaMetricsAppStack
            - sumoECSMetricsAppStack
            - sumoElasticCacheMetricsAppStack
            - CreateCommonResources.AddAccountField
            - CreateCommonResources.AddRegionField
            - CreateCommonResources.AddNamespaceField
            - sumoDynamoDBMetricsAppStack.AddTableNameField
            - sumoAlbMetricsAppStack.AddLoadBalancerField
            - sumoLambdaMetricsAppStack.AddFunctionNameField
            - sumoApiGatewayMetricsAppStack.AddApiNameField
            - sumoRdsMetricsAppStack.AddDBIdentifierField
            - sumoEC2MetricsAppStack.AddInstanceIdField
            - sumoECSMetricsAppStack.AddClusterNameField
            - sumoElasticCacheMetricsAppStack.AddCacheClusterIdField
            - CreateCommonResources.LambdaRole
            - CreateCommonResources.LambdaHelper
            - CreateCommonResources.AccountCheck
            - CreateCommonResources.CreateSumoLogicAWSExplorerView
            - CreateCommonResources.LambdaToDecideCWMetricsSources
            - CreateCommonResources.Primerinvoke
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.AutoEnableAlbLogEventsInvokePermission
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.AutoEnableAlbLogEventsRuleTrigger
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.EnableExisitngAWSResourcesLambda
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.EnableNewAWSResourcesLambda
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.ExistingAWSResources
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.SumoLambdaRole
            - sumoEC2MetricsAppStack.EC2MetricRule
            - sumoEC2MetricsAppStack.sumoApp
            - sumoEC2MetricsAppStack.sumoOverview
            - sumoAlbMetricsAppStack.ALBMetricRule
            - sumoAlbMetricsAppStack.sumoApp
            - sumoAlbMetricsAppStack.SumoALBLogsUpdateSource
            - sumoDynamoDBMetricsAppStack.MetricRule
            - sumoDynamoDBMetricsAppStack.sumoApp
            - sumoRdsMetricsAppStack.ClusterMetricRule
            - sumoRdsMetricsAppStack.sumoApp
            - sumoRdsMetricsAppStack.InstanceMetricRule
            - sumoApiGatewayMetricsAppStack.MetricRule
            - sumoApiGatewayMetricsAppStack.sumoApp
            - sumoLambdaMetricsAppStack.sumoApp
            - sumoLambdaMetricsAppStack.LambdaMetricRule
            - sumoLambdaMetricsAppStack.SumoCloudTrailLogsUpdateSource
            - sumoLambdaMetricsAppStack.LambdaFieldExtractionRule
            - sumoAlbMetricsAppStack.AlbLogsFieldExtractionRule
            - sumoApiGatewayMetricsAppStack.FieldExtractionRule
            - sumoDynamoDBMetricsAppStack.FieldExtractionRule
            - sumoRdsMetricsAppStack.FieldExtractionRule
            - sumoECSMetricsAppStack.FieldExtractionRule
            - sumoECSMetricsAppStack.MetricRule
            - sumoECSMetricsAppStack.sumoApp
            - sumoElasticCacheMetricsAppStack.FieldExtractionRule
            - sumoElasticCacheMetricsAppStack.MetricRule
            - sumoElasticCacheMetricsAppStack.sumoApp
      - AssertType: OutputsCheck
        Assert:
          Outputs:
            - CreateCommonResources.LambdaHelperARN
            - CreateCommonResources.EnterpriseCheck
            - CreateCommonResources.PaidAccountCheck
            - CreateCommonResources.Namespaces
            - CreateCommonResources.LambdaRoleARN
            - sumoLambdaMetricsAppStack.ExistingCloudTrailLogSourceName
            - sumoAlbMetricsAppStack.ExistingLogSourceName
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.EnableExisitngAWSResourcesLambda
            - AutoEnableOptions.AutoEnableS3LogsAlbAWSResources.EnableNewAWSResourcesLambda
      - AssertType: ParameterCheck
        Assert:
          CreateCommonResources:
            AccountAlias: "test7env"
            CollectorName: "aws-observability-test7env-668508221233"
            CreateMetaDataSource: 'No'
            MetaDataSourceName: ""
            MetaDataSourceCategory: ""
            CreateCloudWatchMetricsSource:  'No'
            CloudWatchMetricsSourceName: 'cloudwatch-metrics-ap-south-1'
            CloudWatchMetricsNameSpaces: "AWS/ApplicationELB, AWS/ApiGateway, AWS/DynamoDB, AWS/Lambda, AWS/RDS, AWS/ECS, AWS/ElastiCache, AWS/ELB, AWS/NetworkELB"
            ScanInterval: "30000"
            CloudWatchMetricSourceCategory: "aws/observability/cloudwatch/metrics"
            CreateALBLogSource: 'No'
            CreateALBS3Bucket: 'No'
            ALBS3LogsBucketName: ""
            ALBS3BucketPathExpression: ''
            ALBLogsSourceName: "alb-logs-ap-south-1"
            ALBLogsSourceCategory: "aws/observability/alb/logs"
            CreateCloudTrailLogSource: 'No'
            CreateCloudTrailBucket: 'No'
            CloudTrailLogsBucketName: ""
            CloudTrailBucketPathExpression: ''
            CloudTrailLogsSourceName: "cloudtrail-logs-ap-south-1"
            CloudTrailLogsSourceCategory: "aws/observability/cloudtrail/logs"
            CreateCloudWatchLogSource: 'No'
            CloudWatchLogsSourceName: "cloudwatch-logs-ap-south-1"
            CloudWatchLogsSourceCategory: "aws/observability/cloudwatch/logs"
          sumoEC2MetricsAppStack:
            Section2aInstallApp: 'Yes'
          sumoAlbMetricsAppStack:
            Section2aAccountAlias: 'test7env'
            Section3aInstallApp: 'Yes'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aALBLogsAPIUrl: 'https://api.us2.sumologic.com/api/v1/collectors/194268335/sources/1135631121'
            Section5bALBLogsSourceName: ''
          sumoDynamoDBMetricsAppStack:
            Section2aInstallApp: 'Yes'
            Section3aCloudTrailLogsSourceName: 'test-source-2'
          sumoRdsMetricsAppStack:
            Section2aInstallApp: 'Yes'
            Section3aCloudTrailLogsSourceName: 'test-source-2'
          sumoApiGatewayMetricsAppStack:
            Section2aInstallApp: 'Yes'
            Section3aCloudTrailLogsSourceName: 'test-source-2'
          RootCauseAppStack:
            Section2aInstallApp: 'No'
            Section2bCollectorName: "aws-observability-test7env-668508221233"
            Section3aCreateAwsInventorySource: 'No'
            Section3bAwsInventorySourceName: "inventory-ap-south-1"
            Section3dInventorySourceCategory: "aws/observability/inventory"
            Section4aCreateAwsXRaySource: 'No'
            Section4bAwsXRaySourceName: "xray-ap-south-1"
            Section4cXraySourceCategory: "aws/observability/xray"
          sumoLambdaMetricsAppStack:
            Section2aAccountAlias: 'test7env'
            Section3aInstallApp: 'Yes'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aCloudTrailLogsAPIUrl: 'https://api.us2.sumologic.com/api/v1/collectors/194268335/sources/1135631970'
            Section5bCloudTrailLogsSourceName: ''
            Section6aCloudWatchLogsAPIUrl: ''
            Section6bCloudWatchLogsSourceName: ''
          sumoECSMetricsAppStack:
            Section2aInstallApp: 'Yes'
            Section3aCloudTrailLogsSourceName: 'test-source-2'
          sumoElasticCacheMetricsAppStack:
            Section2aInstallApp: 'Yes'
            Section3aCloudTrailLogsSourceName: 'test-source-2'
  - TestName: createsourceexibucketexisources
    Regions:
      - ap-south-1
    Skip: false
    Parameters:
      Values:
        Section1aSumoLogicDeployment: 'us1'
        Section1bSumoLogicAccessID: '${ENTERPRISE_US1_ACCESS_ID_2}'
        Section1cSumoLogicAccessKey: '${ENTERPRISE_US1_ACCESS_KEY_2}'
        Section1dSumoLogicOrganizationId: '${US1_ENTERPRISE_ORG_ID}'
        Section2aAccountAlias: 'test8env'
        Section3aInstallObservabilityApps: 'No'
        Section4aCreateMetricsSourcesOptions: 'Both'
        Section4bMetricsNameSpaces: 'AWS/ApiGateway, AWS/DynamoDB, AWS/ElastiCache'
        Section4cCloudWatchExistingSourceAPIUrl: 'https://api.us2.sumologic.com/api/v1/collectors/194268335/sources/1135631121'
        Section5aAutoEnableS3LogsALBResourcesOptions: 'None'
        Section5bALBCreateLogSource: 'Yes'
        Section5cALBLogsSourceUrl: 'https://api.us2.sumologic.com/api/v1/collectors/194268335/sources/1135631121'
        Section5dALBS3LogsBucketName: 'cf-templates-1qpf3unpuo1hw-ap-south-1'
        Section5eALBS3BucketPathExpression: '*abc*'
        Section6aCreateCloudTrailLogSource: 'Yes'
        Section6bCloudTrailLogsSourceUrl: 'https://api.us2.sumologic.com/api/v1/collectors/194268335/sources/1135631970'
        Section6cCloudTrailLogsBucketName: 'cf-templates-1qpf3unpuo1hw-ap-south-1'
        Section6dCloudTrailBucketPathExpression: '*abc*'
        Section7aLambdaCreateCloudWatchLogsSource: 'Yes'
        Section7bLambdaCloudWatchLogsSourceUrl: "https://api.us2.sumologic.com/api/v1/collectors/194268335/sources/1135631970"
        Section7cAutoSubscribeLogGroupsLambdaOptions: "None"
        Section8aCreateAwsXraySource: 'No'
    Assertions:
      - AssertType: ResourceExistence
        Assert:
          Resources:
            - CreateCommonResources
            - sumoEC2MetricsAppStack
            - sumoAlbMetricsAppStack
            - sumoDynamoDBMetricsAppStack
            - sumoRdsMetricsAppStack
            - sumoApiGatewayMetricsAppStack
            - RootCauseAppStack
            - sumoLambdaMetricsAppStack
            - sumoECSMetricsAppStack
            - sumoElasticCacheMetricsAppStack
            - CreateCommonResources.AddAccountField
            - CreateCommonResources.AddRegionField
            - CreateCommonResources.AddNamespaceField
            - sumoDynamoDBMetricsAppStack.AddTableNameField
            - sumoAlbMetricsAppStack.AddLoadBalancerField
            - sumoLambdaMetricsAppStack.AddFunctionNameField
            - sumoApiGatewayMetricsAppStack.AddApiNameField
            - sumoRdsMetricsAppStack.AddDBIdentifierField
            - sumoEC2MetricsAppStack.AddInstanceIdField
            - sumoECSMetricsAppStack.AddClusterNameField
            - sumoElasticCacheMetricsAppStack.AddCacheClusterIdField
            - CreateCommonResources.LambdaRole
            - CreateCommonResources.LambdaHelper
            - CreateCommonResources.AccountCheck
            - CreateCommonResources.CreateSumoLogicAWSExplorerView
            - CreateCommonResources.SumoLogicSourceRole
            - CreateCommonResources.SumoLogicHostedCollector
            - CreateCommonResources.LambdaToDecideCWMetricsSources
            - CreateCommonResources.Primerinvoke
            - CreateCommonResources.CloudWatchMetricsFirstStack
            - CreateCommonResources.CloudWatchMetricsSecondStack
            - CreateCommonResources.CloudWatchMetricsFirstStack.SecondCloudwatchMetricsSource
            - CreateCommonResources.CloudWatchMetricsFirstStack.ThirdCloudwatchMetricsSource
            - CreateCommonResources.CloudWatchMetricsSecondStack.SecondCloudwatchMetricsSource
            - CreateCommonResources.ALBSource
            - CreateCommonResources.ALBSNSTopic
            - CreateCommonResources.ALBSNSpolicy
            - CreateCommonResources.ALBSNSSubscription
            - CreateCommonResources.CloudTrailSource
            - CreateCommonResources.CloudTrailSNSTopic
            - CreateCommonResources.CloudTrailSNSpolicy
            - CreateCommonResources.CloudTrailSNSSubscription
            - CreateCommonResources.CloudWatchEventFunction
            - CreateCommonResources.CloudWatchHTTPSource
            - RootCauseAppStack.RootCauseRole
            - RootCauseAppStack.SumoLogicHostedCollector
            - RootCauseAppStack.InventorySource
            - CreateCommonResources.CloudWatchEventFunction.SumoCWDeadLetterQueue
            - CreateCommonResources.CloudWatchEventFunction.SumoCWEmailSNSTopic
            - CreateCommonResources.CloudWatchEventFunction.SumoCWEventsInvokeLambdaPermission
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLambdaExecutionRole
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLambdaPermission
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogGroup
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogSubsriptionFilter
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogsLambda
            - CreateCommonResources.CloudWatchEventFunction.SumoCWProcessDLQLambda
            - CreateCommonResources.CloudWatchEventFunction.SumoCWProcessDLQScheduleRule
            - CreateCommonResources.CloudWatchEventFunction.SumoCWSpilloverAlarm
            - sumoEC2MetricsAppStack.EC2MetricRule
            - sumoAlbMetricsAppStack.ALBMetricRule
            - sumoDynamoDBMetricsAppStack.MetricRule
            - sumoRdsMetricsAppStack.ClusterMetricRule
            - sumoRdsMetricsAppStack.InstanceMetricRule
            - sumoApiGatewayMetricsAppStack.MetricRule
            - sumoLambdaMetricsAppStack.LambdaMetricRule
            - sumoLambdaMetricsAppStack.LambdaFieldExtractionRule
            - sumoAlbMetricsAppStack.AlbLogsFieldExtractionRule
            - sumoApiGatewayMetricsAppStack.FieldExtractionRule
            - sumoDynamoDBMetricsAppStack.FieldExtractionRule
            - sumoLambdaMetricsAppStack.LambdaCloudWatchLogsFieldExtractionRule
            - sumoRdsMetricsAppStack.FieldExtractionRule
            - sumoECSMetricsAppStack.FieldExtractionRule
            - sumoECSMetricsAppStack.MetricRule
            - sumoElasticCacheMetricsAppStack.FieldExtractionRule
            - sumoElasticCacheMetricsAppStack.MetricRule
      - AssertType: OutputsCheck
        Assert:
          Outputs:
            - CreateCommonResources.LambdaHelperARN
            - CreateCommonResources.EnterpriseCheck
            - CreateCommonResources.PaidAccountCheck
            - CreateCommonResources.Namespaces
            - CreateCommonResources.LambdaRoleARN
            - CreateCommonResources.CloudWatchLambdaARN
            - CreateCommonResources.CloudWatchEventFunction.SumoCWLogsLambdaArn
      - AssertType: ParameterCheck
        Assert:
          CreateCommonResources:
            AccountAlias: "test8env"
            CollectorName: "aws-observability-test8env-668508221233"
            CreateMetaDataSource: 'No'
            MetaDataSourceName: ""
            MetaDataSourceCategory: ""
            CreateCloudWatchMetricsSource:  'Yes'
            CloudWatchMetricsSourceName: 'cloudwatch-metrics-ap-south-1'
            CloudWatchMetricsNameSpaces: "AWS/ApiGateway, AWS/DynamoDB, AWS/ElastiCache"
            ScanInterval: "30000"
            CloudWatchMetricSourceCategory: "aws/observability/cloudwatch/metrics"
            CreateALBLogSource: 'Yes'
            CreateALBS3Bucket: 'No'
            ALBS3LogsBucketName: ""
            ALBS3BucketPathExpression: ''
            ALBLogsSourceName: "alb-logs-ap-south-1"
            ALBLogsSourceCategory: "aws/observability/alb/logs"
            CreateCloudTrailLogSource: 'Yes'
            CreateCloudTrailBucket: 'No'
            CloudTrailLogsBucketName: ""
            CloudTrailBucketPathExpression: ''
            CloudTrailLogsSourceName: "cloudtrail-logs-ap-south-1"
            CloudTrailLogsSourceCategory: "aws/observability/cloudtrail/logs"
            CreateCloudWatchLogSource: 'Yes'
            CloudWatchLogsSourceName: "cloudwatch-logs-ap-south-1"
            CloudWatchLogsSourceCategory: "aws/observability/cloudwatch/logs"
          sumoEC2MetricsAppStack:
            Section2aInstallApp: 'No'
          sumoAlbMetricsAppStack:
            Section2aAccountAlias: 'test8env'
            Section3aInstallApp: 'No'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aALBLogsAPIUrl: ''
            Section5bALBLogsSourceName: '*alb-logs*'
          sumoDynamoDBMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoRdsMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoApiGatewayMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          RootCauseAppStack:
            Section2aInstallApp: 'No'
            Section2bCollectorName: "aws-observability-test8env-668508221233"
            Section3aCreateAwsInventorySource: 'Yes'
            Section3bAwsInventorySourceName: "inventory-ap-south-1"
            Section3dInventorySourceCategory: "aws/observability/inventory"
            Section4aCreateAwsXRaySource: 'No'
            Section4bAwsXRaySourceName: "xray-ap-south-1"
            Section4cXraySourceCategory: "aws/observability/xray"
          sumoLambdaMetricsAppStack:
            Section2aAccountAlias: 'test8env'
            Section3aInstallApp: 'No'
            Section4aCloudWatchExistingSourceAPIUrl: ''
            Section5aCloudTrailLogsAPIUrl: ''
            Section5bCloudTrailLogsSourceName: '*cloudtrail-logs*'
            Section6aCloudWatchLogsAPIUrl: ''
            Section6bCloudWatchLogsSourceName: '*cloudwatch-logs*'
          sumoECSMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'
          sumoElasticCacheMetricsAppStack:
            Section2aInstallApp: 'No'
            Section3aCloudTrailLogsSourceName: '*cloudtrail-logs*'